<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <title>GURU Able - Free Lite Admin Template </title>
    <!-- HTML5 Shim and Respond.js IE9 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content="CodedThemes">
    <meta name="keywords"
          content=" Admin , Responsive, Landing, Bootstrap, App, Template, Mobile, iOS, Android, apple, creative app">
    <meta name="author" content="CodedThemes">
    <!-- Favicon icon -->
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <!-- Google font-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet">
    <!-- Required Fremwork -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap/css/bootstrap.min.css">
    <!-- themify-icons line icon -->
    <link rel="stylesheet" type="text/css" href="/icon/themify-icons/themify-icons.css">
    <!-- ico font -->
    <link rel="stylesheet" type="text/css" href="/icon/icofont/css/icofont.css">

    <!-- Style.css -->
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/jquery.mCustomScrollbar.css">
    <style>
        .btn-card {
          text-transform: uppercase;
          font-size: 13px;
          padding: 5px 10px;
          margin: 0px 10px;
          color: #fff;
          border-radius: 5px;
      }
       table{
        border-collapse: collapse;
        border-spacing: 0
       }
       th{
           background-color: #f6f7fb;
       color: #000;
       }
       th, td{
           border: 1px solid #ccc;
       padding: 10px;
       }
       input{
           border:none;
       }
       .container{
           display: flex;
           max-width: 1141px;
           flex-flow: column;
           justify-content: center;
           align-items: center;
       }
       .btn-display{
        display: flex;
        justify-content: center;
        margin-bottom:20px;
       }
       button{
           margin:10px;
       }
        textarea {
       border: none;
       resize: none;
   }
    </style>
</head>

<body>
<!-- Pre-loader start -->

<!-- Pre-loader end -->
<div id="pcoded" class="pcoded">
    <div class="pcoded-overlay-box"></div>
    <div class="pcoded-container navbar-wrapper">
        <nav class="navbar header-navbar pcoded-header" th:include="includes/header :: header"
             th:with="name=${user.name}, part=${user.part}, roles=${user.roles}"></nav>

        <div class="pcoded-main-container">
            <div th:include="includes/navbar :: navbar"
                 th:with="name=${user.name}, part=${user.part}, roles=${user.roles}"></div>
            <div class="pcoded-content">
                <div class="pcoded-inner-content">
                    <div class="main-body">
                        <div class="page-wrapper">
                            <div class="page-header card">
                                <div class="row align-items-end">
                                    <div class="col-lg-8">
                                        <div class="page-header-title">
                                            <i class="icofont icofont-table" style="background-color: #FC6180;"></i>
                                            <div style="display:flex; align-items:center;">
                                                <h4> 견적서 </h4>

                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>
                            <div class="page-body">


                                <div class="card">
                                    <form>

                                    <div class="card-header">
                                        <div class="container">
                                        <h1>견 적 서</h1>



                                            <table id="estimateTable" width="90%" >

                                            <tr>
                                                <th colspan="2">견적서번호</th>
                                                <td colspan="3">
                                                    <input type="text" th:value="${quotation.id}" id="quotationId" readonly>
                                                </td>
                                                <th colspan="2">회사명</th>
                                                <td colspan="3">
                                                    <input type="text" id="company_name" th:value="${quotation.company_name}" readonly>
                                                </td>

                                            </tr>
                                            <tr>
                                                <th rowspan="2" colspan="2">수신</th>
                                                <td rowspan="2" colspan="3">
                                                    <p style="font-size: larger;"><u>GURO자전거</u></p>
                                                    <p><u>경기 수원시 팔달구 권광로 146 벽산그랜드코아 4층 401호</u></p>
                                                    <p><u>Tel: 031-548-4664 </u></p>
                                                    <p><u>권나현 대표</u></p>
                                                </td>
                                                <th rowspan="1" colspan="2">사업자번호</th>
                                                <td colspan="3">
                                                    <input type="text" id="company_id" th:value="${quotation.Company.companyId}" readonly>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th rowspan="1" colspan="2">Bidding No.</th>
                                                <td colspan="3" th:text="${quotation.biddingNo}">
                                                </td>
                                            </tr>
                                            <tr>
                                                <th rowspan="2" colspan="2">주소</th>
                                                <td colspan="3" rowspan="2" th:text="${quotation.Company.address}">
                                                </td>
                                                <th colspan="2" rowspan="2">대표자(혹은 담당자)</th>
                                                <th>성명</th>
                                                <td colspan="2" th:text="${quotation.Company.ceo}">>

                                                </td>
                                            </tr>
                                            <tr>
                                                <th >연락처</th>
                                                <td colspan="2" th:text="${quotation.Company.tel}">

                                                </td>
                                            </tr>
                                                <tr>
                                                    <th colspan="2">리드타임</th>
                                                    <td colspan="3" th:text="${quotation.leadTime}">

                                                    </td>
                                                    <th colspan="2">거래조건</th>
                                                    <td colspan="3" th:text="${quotation.tradeTerms}">

                                                    </td>

                                                </tr>
                                                <tr>
                                                    <th colspan="2">지불조건</th>
                                                    <td colspan="3" th:text="${quotation.paymentTerms}"></td>
                                                    <th colspan="2">최종납기일</th>
                                                    <td colspan="3" th:text="${quotation.deadline}"></td>
                                                </tr>

                                            <tr>
                                                <th>No</th>
                                                <th>PID</th>
                                                <th colspan="2">품명</th>
                                                <th>규격</th>
                                                <th>수량</th>
                                                <th>단위</th>
                                                <th>단가</th>
                                                <th colspan="2">금액</th>


                                            </tr>

                                            <tbody id="tableBody">

                                            </tbody>


                                            <tr th:each="qd, itemStat : ${quotationDetailDTOList}">
                                                <th scope="row" th:text="${itemStat.count}"></th>
                                                <td th:text="${qd.Material.materialId}"></td>
                                                <td colspan="2" th:text="${qd.Material.materialName}"></td>
                                                <td th:text="${qd.Material.materialDescription}"></td>
                                                <td th:text="${qd.quotationCnt}"></td>
                                                <td th:text="${qd.quotationMeasure}"></td>
                                                <td th:text="${qd.quotationPrice}"></td>
                                                <td colspan="2" th:text="${qd.quotationPrice*qd.quotationCnt}"></td>
                                            </tr>
                                            <!---------------------------------------------------->
                                            <tr>
                                                <th colspan="3">합계(VAT 포함)</th>

                                                <td colspan="7" class="total" th:text="${quotation.quotation_totalprice}"></td>

                                            </tr>
                                            <tr>
                                                <th colspan="2">비고</th>
                                                <td colspan="8">
                                                    <textarea rows="10" style="width:100%;" th:text="${quotation.quotation_memo}" readonly></textarea>
                                                </td>
                                            </tr>

                                        </table>


                                    </div>
                                    </div>

                                    <div class="btn-display" style="margin-top:30px;">
                                        <input type="button"
                                               th:attr="onclick=${quotation.status == 1 or quotation.status == 2 ? null : 'acceptQuotaion()'}"
                                               th:if="${quotation.status != 1 and quotation.status != 2}"
                                               class="btn btn-warning"
                                               style="background-color: #FC6180; border-color: #FC6180; margin:10px;"
                                               value="수락"/>
                                        <input type="button"
                                               th:attr="onclick=${quotation.status == 1 or quotation.status == 2 ? null : 'dropQuotation()'}"
                                               th:if="${quotation.status != 1 and quotation.status != 2}"
                                               class="btn btn-warning"
                                               style="background-color: #FC6180; border-color: #FC6180; margin:10px;"
                                               value="거절"/>

                                        <input type="button"
                                               th:attr="onclick=${quotation.status == 1 or quotation.status == 2 ? null : 'deleteQuotation()'}"
                                               th:if="${quotation.status != 1 and quotation.status != 2}"
                                               class="btn btn-warning"
                                               style="background-color: #FC6180; border-color: #FC6180; margin:10px;"
                                               value="삭제"/>

                                        <input type="button"
                                               th:attr="onclick='goBack()'"
                                               class="btn btn-warning"
                                               style="background-color: #FC6180; border-color: #FC6180;  margin:10px;" value="뒤로"/>
                                    </div>
                                    </form>

                                </div>


                            </div>
                            <div id="styleSelector">

                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>
<!-- Warning Section Starts -->
<!-- Older IE warning message -->

<![endif]-->
<!-- Warning Section Ends -->
<!-- Required Jquery -->
<script type="text/javascript" src="/js/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/js/jquery-ui/jquery-ui.min.js"></script>
<script type="text/javascript" src="/js/popper.js/popper.min.js"></script>
<script type="text/javascript" src="/js/bootstrap/js/bootstrap.min.js"></script>
<!-- jquery slimscroll js -->
<script type="text/javascript" src="/js/jquery-slimscroll/jquery.slimscroll.js"></script>
<!-- modernizr js -->
<script type="text/javascript" src="/js/modernizr/modernizr.js"></script>
<!-- am chart -->
<script src="/pages/widget/amchart/amcharts.min.js"></script>
<script src="/pages/widget/amchart/serial.min.js"></script>
<!-- Todo js -->
<script type="text/javascript " src="/pages/todo/todo.js "></script>
<!-- Custom js -->
<script type="text/javascript" src="/pages/dashboard/custom-dashboard.js"></script>
<script type="text/javascript" src="/js/script.js"></script>
<script type="text/javascript " src="/js/SmoothScroll.js"></script>
<script src="/js/pcoded.min.js"></script>
<script src="/js/demo-12.js"></script>
<script src="/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script>

    function goBack() {
             window.history.back();
         }

      function gotoList(){
        var url = '/plan/quotation';
        window.location.href = url;
    }


    function acceptQuotaion(){
    var quotationId = document.getElementById('quotationId').value;
        $.ajax({
            type: 'POST',
            url: '/plan/quotation_accept',
            contentType: 'application/json',
            data: quotationId,
            success: function (response) {
                alert(response);
                window.location.href = '/plan/quotation';
            },
            error: function (error) {
                alert('삭제실패:', error);
            }
        });
    }



    function dropQuotation(){
    var quotationId = document.getElementById('quotationId').value;
        $.ajax({
            type: 'POST',
            url: '/plan/quotation_drop',
            contentType: 'application/json',
            data: quotationId,
            success: function (response) {
                alert(response);
               window.location.href = '/plan/quotation';
            },
            error: function (error) {
                alert('삭제실패:', error);
            }
        });
    }


    function deleteQuotation(){
    var quotationId = document.getElementById('quotationId').value;
        $.ajax({
            type: 'POST',
            url: '/plan/quotation_delete',
            contentType: 'application/json',
            data: quotationId,
            success: function (response) {
                alert(response);
                window.location.href = '/plan/quotation';
            },
            error: function (error) {
                alert('삭제실패:', error);
            }
        });
    }



</script>
</body>

</html>
